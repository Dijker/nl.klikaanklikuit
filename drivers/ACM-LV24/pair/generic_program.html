<script>
var options = {
	template: '../lib/pair/program.html',
	id: 'generic_program',
	previous: 'generic_choice',
	title: 'deviceClasses.build_in.views.generic_program.title',
	body: 'deviceClasses.build_in.views.generic_program.body',
	svg: '<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 20.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 1058.3 1098.6" style="enable-background:new 0 0 1058.3 1098.6;" xml:space="preserve" xmlns:pulse="-">\n<style type="text/css">\n\t.st0{fill:#0074CC;}\n</style>\n<g>\n\t<path d="M126,641.3c0.9-3.1,1.4-6.7,1.4-10.7c0-4.7-0.7-8.9-2.1-12.6c-1.4-3.7-3.5-6.7-6.3-9.1c-2.1-1.8-4.7-3.1-7.8-3.8\n\t\tc-2.2-0.5-5.3-0.8-9.5-0.8H83.6v53.1h19.1c3.2,0,6.1-0.3,8.5-0.9c2.5-0.6,4.6-1.5,6.3-2.7c1.8-1.2,3.4-2.8,4.8-4.8\n\t\tC123.9,647,125.1,644.4,126,641.3z M118.8,640.7c-0.9,2.8-2.2,5.1-3.9,6.7c-1.2,1.2-2.8,2.1-4.8,2.8s-4.7,1-8.2,1H90.6v-40.6h11.1\n\t\tc4.2,0,7.2,0.4,9.1,1.1c2.6,1,4.8,3,6.6,6c1.8,3,2.7,7.3,2.7,12.8C120.2,634.5,119.7,637.9,118.8,640.7z"/>\n\t<path d="M146.1,654.8c3.6,2.3,8.2,3.5,13.9,3.5c5.5,0,10.2-1.5,14-4.5s6.5-7.4,7.9-13.2l-7-1.8c-1,4.5-2.8,7.8-5.5,10.1\n\t\ts-6,3.4-10,3.4c-3.2,0-6.2-0.8-9-2.5s-4.8-4.2-6.1-7.5c-1.3-3.4-2-7.3-2-11.8c0-3.5,0.6-6.9,1.7-10.2c1.1-3.3,3-5.9,5.8-7.9\n\t\tc2.7-2,6.1-2.9,10.2-2.9c3.5,0,6.5,0.9,8.8,2.6c2.3,1.8,4.1,4.6,5.3,8.4l6.9-1.6c-1.4-4.9-3.9-8.7-7.6-11.4\n\t\tc-3.6-2.7-8.1-4.1-13.4-4.1c-4.7,0-9,1.1-12.8,3.2c-3.9,2.1-6.9,5.3-9,9.4c-2.1,4.1-3.2,8.9-3.2,14.5c0,5.1,0.9,9.8,2.8,14.2\n\t\tC139.8,649.1,142.5,652.5,146.1,654.8z"/>\n\t<rect x="212.4" y="604.3" width="7" height="53.1"/>\n\t<polygon points="273.5,657.4 273.5,604.3 266.8,604.3 266.8,646 238.9,604.3 231.7,604.3 231.7,657.4 238.5,657.4 238.5,615.7\n\t\t266.3,657.4 \t"/>\n\t<path d="M94.1,973.4c22.6,0,41-18.4,41-41s-18.4-41-41-41s-41,18.4-41,41S71.5,973.4,94.1,973.4z M94.1,895\n\t\tc20.6,0,37.4,16.8,37.4,37.4s-16.8,37.4-37.4,37.4S56.7,953,56.7,932.4S73.4,895,94.1,895z"/>\n\t<path d="M271.5,973.4c22.6,0,41-18.4,41-41s-18.4-41-41-41s-41,18.4-41,41S248.9,973.4,271.5,973.4z M271.5,895\n\t\tc20.6,0,37.4,16.8,37.4,37.4s-16.8,37.4-37.4,37.4s-37.4-16.8-37.4-37.4S250.8,895,271.5,895z"/>\n\t<path d="M1056.3,81.2c0-1.9-0.7-3.7-2.1-5L982.1,4.1c-1.3-1.3-3.1-2.1-5-2.1H80c-1.9,0-3.7,0.7-5,2.1L2.8,76.2\n\t\tc-1.3,1.3-2.1,3.1-2.1,5v713.6c0,0-0.7,5.3-0.7,9.4v258.1c0,5.9,4.8,10.6,10.6,10.6h25.5v16c0,5.3,4.3,9.6,9.6,9.6h286\n\t\tc5.3,0,9.6-4.3,9.6-9.6v-16h13.6c5.9,0,10.6-4.8,10.6-10.6v-258c0-5.9-4.8-10.6-10.6-10.6h-340V84.2l68-68h270.3v118.1\n\t\tc0,25,20.3,45.3,45.3,45.3h251c25,0,45.3-20.3,45.3-45.3V16.2h279.3l68,68v708.6H701.2c-5.9,0-10.6,4.8-10.6,10.6v196.9H366.4v14.2\n\t\th324.2v47.1c0,5.9,4.8,10.6,10.6,10.6H714v16.8c0,5.3,4.3,9.6,9.6,9.6h286c5.3,0,9.6-4.3,9.6-9.6v-16.8h26.2\n\t\tc5.9,0,10.6-4.8,10.6-10.6V803.4c0-3.8,0.2-9,0.2-9V81.2H1056.3z M334.3,1089c0,1.4-1.1,2.5-2.5,2.5h-286c-1.4,0-2.5-1.1-2.5-2.5\n\t\tv-16h291V1089z M358.5,804.3v258.1c0,2-1.6,3.5-3.5,3.5H10.6c-2,0-3.5-1.6-3.5-3.5V804.3c0-2,1.6-3.5,3.5-3.5h344.3\n\t\tC356.9,800.7,358.5,802.3,358.5,804.3z M687.7,134.2c0,21.1-17.1,38.2-38.2,38.2h-251c-21.1,0-38.2-17.1-38.2-38.2v-118h327.4\n\t\tL687.7,134.2L687.7,134.2z M1012.2,1089c0,1.4-1.1,2.5-2.5,2.5h-286c-1.4,0-2.5-1.1-2.5-2.5v-16.8h291V1089z M1049,1061.5\n\t\tc0,2-1.6,3.5-3.5,3.5H701.2c-2,0-3.5-1.6-3.5-3.5V803.4c0-2,1.6-3.5,3.5-3.5h344.3c2,0,3.5,1.6,3.5,3.5V1061.5z"/>\n\t<path d="M155.9,139.1c0-9.8-8-17.8-17.8-17.8s-17.8,8-17.8,17.8s8,17.8,17.8,17.8S155.9,148.9,155.9,139.1z M123.9,139.1\n\t\tc0-7.9,6.4-14.2,14.2-14.2c7.9,0,14.2,6.4,14.2,14.2c0,7.9-6.4,14.2-14.2,14.2C130.3,153.4,123.9,147,123.9,139.1z"/>\n\t<path d="M784.6,896.6c-22.6,0-41,18.4-41,41s18.4,41,41,41s41-18.4,41-41S807.2,896.6,784.6,896.6z M784.6,975\n\t\tc-20.6,0-37.4-16.8-37.4-37.4s16.8-37.4,37.4-37.4S822,917,822,937.6S805.3,975,784.6,975z"/>\n\t<path d="M962.1,896.6c-22.6,0-41,18.4-41,41s18.4,41,41,41s41-18.4,41-41S984.7,896.6,962.1,896.6z M962.1,975\n\t\tc-20.6,0-37.4-16.8-37.4-37.4s16.8-37.4,37.4-37.4s37.4,16.8,37.4,37.4S982.7,975,962.1,975z"/>\n\t<path d="M295.9,139.1c0-14.7-12-26.7-26.7-26.7s-26.7,12-26.7,26.7s12,26.7,26.7,26.7C283.9,165.8,295.9,153.8,295.9,139.1z\n\t\t M269.2,162.3c-12.8,0-23.2-10.4-23.2-23.2s10.4-23.2,23.2-23.2s23.2,10.4,23.2,23.2C292.4,151.9,282,162.3,269.2,162.3z"/>\n\t<polygon points="98.9,754.3 98.9,731.6 121.5,731.6 121.5,722.1 98.9,722.1 98.9,699.5 89.3,699.5 89.3,722.1 66.6,722.1\n\t\t66.6,731.6 89.3,731.6 89.3,754.3 \t"/>\n\t<rect x="255.7" y="732.6" width="31.5" height="10.2"/>\n\t<path d="M774.3,608.9c-2.1-1.8-4.7-3.1-7.8-3.8c-2.2-0.5-5.3-0.8-9.5-0.8h-18.3v53.1H758c3.2,0,6.1-0.3,8.5-0.9\n\t\tc2.5-0.6,4.6-1.5,6.3-2.7c1.8-1.2,3.4-2.8,4.8-4.8c1.5-2,2.7-4.6,3.6-7.7c0.9-3.1,1.4-6.7,1.4-10.7c0-4.7-0.7-8.9-2.1-12.6\n\t\tC779.2,614.3,777.1,611.2,774.3,608.9z M774,640.7c-0.9,2.8-2.2,5.1-3.9,6.7c-1.2,1.2-2.8,2.1-4.8,2.8s-4.7,1-8.2,1h-11.3v-40.6\n\t\tH757c4.2,0,7.2,0.4,9.1,1.1c2.6,1,4.8,3,6.6,6s2.7,7.3,2.7,12.8C775.4,634.5,774.9,637.9,774,640.7z"/>\n\t<path d="M805,612.4c2.7-2,6.1-2.9,10.2-2.9c3.5,0,6.5,0.9,8.8,2.6c2.3,1.8,4.1,4.6,5.3,8.4l6.9-1.6c-1.4-4.9-3.9-8.7-7.6-11.4\n\t\tc-3.6-2.7-8.1-4.1-13.4-4.1c-4.7,0-9,1.1-12.8,3.2c-3.9,2.1-6.9,5.3-9,9.4c-2.1,4.1-3.2,8.9-3.2,14.5c0,5.1,0.9,9.8,2.8,14.2\n\t\tc1.9,4.4,4.6,7.8,8.2,10.1c3.6,2.3,8.2,3.5,13.9,3.5c5.5,0,10.2-1.5,14-4.5s6.5-7.4,7.9-13.2l-7-1.8c-1,4.5-2.8,7.8-5.5,10.1\n\t\ts-6,3.4-10,3.4c-3.2,0-6.2-0.8-9-2.5s-4.8-4.2-6.1-7.5c-1.3-3.4-2-7.3-2-11.8c0-3.5,0.6-6.9,1.7-10.2\n\t\tC800.4,616.9,802.3,614.3,805,612.4z"/>\n\t<path d="M876.3,654.7c3.9,2.4,8.4,3.6,13.4,3.6c4.6,0,8.9-1.1,12.9-3.3s7.1-5.4,9.2-9.6c2.2-4.2,3.3-9.1,3.3-14.4\n\t\tc0-5.3-1-10-3.1-14.2s-5.1-7.4-9-9.8c-3.9-2.3-8.4-3.5-13.3-3.5c-7.5,0-13.6,2.5-18.3,7.5s-7.1,11.9-7.1,20.7c0,4.7,1,9.1,3,13.2\n\t\tC869.4,649,872.4,652.2,876.3,654.7z M876.9,614.6c3.6-3.4,7.9-5.1,12.8-5.1c3.5,0,6.6,0.9,9.5,2.7c2.8,1.8,4.9,4.3,6.4,7.5\n\t\ts2.2,7,2.2,11.3c0,6.8-1.7,12.1-5.1,15.8c-3.4,3.7-7.8,5.6-13,5.6s-9.5-1.8-12.9-5.5s-5.2-8.7-5.2-15.1\n\t\tC871.6,623.7,873.4,618,876.9,614.6z"/>\n\t<path d="M924.3,604.3V635c0,5.6,0.7,10.1,2,13.3s3.6,5.7,6.8,7.4s7.2,2.6,12.2,2.6c5.1,0,9.2-1,12.4-3c3.1-2,5.3-4.5,6.5-7.6\n\t\ts1.8-7.4,1.8-12.7v-30.6h-7V635c0,6.7-1.1,11.2-3.3,13.5s-5.9,3.5-11,3.5c-3,0-5.5-0.6-7.6-1.8s-3.5-2.9-4.4-5.1\n\t\tc-0.9-2.2-1.3-5.6-1.3-10.2v-30.6L924.3,604.3L924.3,604.3z"/>\n\t<polygon points="998.2,657.4 998.2,610.5 1015.7,610.5 1015.7,604.3 973.6,604.3 973.6,610.5 991.1,610.5 991.1,657.4 \t"/>\n\t<polygon points="961.1,699.5 951.4,699.5 951.4,722.1 928.8,722.1 928.8,731.6 951.4,731.6 951.4,754.3 961.1,754.3 961.1,731.6\n\t\t983.7,731.6 983.7,722.1 961.1,722.1 \t"/>\n\t<rect x="763.1" y="732.6" width="31.5" height="10.2"/>\n</g>\n<path pulse:initial="true" d="M269.2,119.8c10.7,0,19.3,8.6,19.3,19.3s-8.6,19.3-19.3,19.3c-10.7,0-19.3-8.6-19.3-19.3\n\tC249.9,128.5,258.6,119.8,269.2,119.8"/>\n<path class="st0" d="M138.1,125.6c7.5,0,13.5,6,13.5,13.5s-6,13.5-13.5,13.5s-13.5-6-13.5-13.5C124.6,131.7,130.7,125.6,138.1,125.6\n\t"/>\n</svg>\n',
	svgWidth: '80vw',
	svgHeight: '70vh',
	initWithDeviceData: false,
	next: true
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container"></div>
	<div id="body"><span class="content"></span></div>
	<div class="programAnimation" id="sendProgramSignalBackground" style="display:none;"></div>
	<i class="loading fa fa-cog fa-spin programAnimation" id="sendProgramSignalSpinner" style="display:none;"></i>
</div>

<script>
	var $container = $('[data-id="' + options.id + '"] ');
	$container.find('#body > span').html(__(options.body));
	var $imageContainer = $container.find('#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);
	var $programElems = $container.find('.programAnimation');

	$imageContainer.html(options.svg);
	$imageContainer.highlight();

	if (!$container.find('.view-navigation-next.dummy').length) {
		var $nextButton = $container.find('.view-navigation-next');
		var $nextButtonDummy = $nextButton.clone().addClass('dummy');
		$nextButton.hide();
		$nextButton.parent().append($nextButtonDummy);

		$nextButtonDummy.on('click', function (e) {
			$programElems.show();
			Homey.emit('program_send', function (err) {
				if (err){
					Homey.alert(err.message && err.message.indexOf(' ') === -1 && __(err.message) !== err.message ? __(err.message) : JSON.stringify(err));
					return;
				}
				$nextButtonDummy.siblings('.view-navigation-next').click();
				$programElems.hide();
			});
			e.stopPropagation();
			return false;
		});
	}

	Homey.emit('program', function(err, device){
		const dataKey = JSON.stringify(device.data);
		window.selected_devices = [ dataKey ];
		window.found_devices = {};
		window.found_devices[dataKey] = device;
	});
</script>

<style>
	#sendProgramSignalSpinner {
		z-index: 2;
		position: absolute;
		top: 25vh;
		left: 38vw;
		font-size: 9vh;
		opacity: 1;
	}

	#sendProgramSignalBackground {
		z-index: 1;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		position: absolute;
		background-color: #FFF;
		opacity: 0.8;
	}
</style>