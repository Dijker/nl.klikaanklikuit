<script>
var options = {
	template: '../lib/pair/imitate.html',
	id: 'generic_imitate',
	title: 'deviceClasses.generic_socket.views.generic_imitate.title',
	body: 'deviceClasses.socket.views.generic_imitate.body',
	svg: '<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 17.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t width="52.95px" height="113.772px" viewBox="0 0 52.95 113.772" enable-background="new 0 0 52.95 113.772" xml:space="preserve" xmlns:pulse="-">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.234,0h32.482c2.815,0,5.374,1.151,7.228,3.006\n\tc1.855,1.855,3.006,4.414,3.006,7.229v93.303c0,2.815-1.151,5.374-3.006,7.228c-1.855,1.855-4.413,3.006-7.228,3.006l-32.482,0\n\tc-2.815,0-5.374-1.151-7.228-3.006C1.152,108.91,0,106.352,0,103.537V10.234C0,7.42,1.151,4.86,3.006,3.006\n\tC4.861,1.151,7.42,0,10.234,0 M42.716,0.637H10.234c-2.638,0-5.038,1.08-6.777,2.819c-1.739,1.739-2.819,4.139-2.819,6.777v93.303\n\tc0,2.639,1.08,5.038,2.819,6.777c1.739,1.739,4.139,2.819,6.777,2.819l32.482,0c2.639,0,5.038-1.08,6.777-2.819\n\tc1.739-1.739,2.819-4.139,2.819-6.777V10.234c0-2.639-1.08-5.038-2.819-6.777C47.754,1.717,45.355,0.637,42.716,0.637"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.234,2.711h32.482c2.069,0,3.95,0.847,5.314,2.21\n\tc1.363,1.363,2.21,3.245,2.21,5.314v93.303c0,2.069-0.847,3.95-2.21,5.314c-1.363,1.364-3.244,2.21-5.314,2.21H10.234\n\tc-2.068,0-3.95-0.847-5.314-2.21c-1.363-1.363-2.21-3.244-2.21-5.314V10.234c0-2.068,0.847-3.95,2.21-5.314\n\tC6.284,3.557,8.165,2.711,10.234,2.711 M42.716,3.029H10.234c-1.981,0-3.782,0.811-5.088,2.117C3.84,6.452,3.029,8.253,3.029,10.234\n\tv93.303c0,1.981,0.811,3.782,2.117,5.088c1.306,1.306,3.107,2.117,5.088,2.117h32.482c1.981,0,3.782-0.811,5.088-2.117\n\tc1.306-1.306,2.117-3.107,2.117-5.088l0-93.303c0-1.981-0.811-3.782-2.117-5.088C46.498,3.84,44.697,3.029,42.716,3.029"/>\n<path fill-rule="evenodd" clip-rule="evenodd" fill="#000000" d="M26.834,10.672c0.242,0,0.463,0.098,0.622,0.258\n\tc0.159,0.159,0.257,0.379,0.257,0.622c0,0.242-0.098,0.463-0.257,0.622c-0.159,0.159-0.379,0.257-0.622,0.257\n\tc-0.243,0-0.463-0.098-0.622-0.257c-0.159-0.159-0.257-0.379-0.257-0.622c0-0.243,0.098-0.463,0.257-0.622\n\tC26.372,10.77,26.591,10.672,26.834,10.672"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M26.834,10.412c0.314,0,0.599,0.128,0.806,0.334\n\tc0.206,0.206,0.334,0.49,0.334,0.806c0,0.314-0.128,0.599-0.334,0.806c-0.206,0.206-0.491,0.334-0.806,0.334\n\tc-0.314,0-0.599-0.128-0.806-0.334c-0.206-0.206-0.334-0.492-0.334-0.806c0-0.314,0.128-0.599,0.334-0.806\n\tC26.235,10.539,26.519,10.412,26.834,10.412 M27.53,10.854c-0.178-0.178-0.425-0.289-0.696-0.289c-0.272,0-0.518,0.11-0.697,0.289\n\tc-0.179,0.179-0.288,0.425-0.288,0.696c0,0.272,0.11,0.518,0.288,0.696c0.178,0.179,0.425,0.289,0.697,0.289\n\tc0.271,0,0.518-0.11,0.696-0.289c0.179-0.179,0.288-0.425,0.288-0.696C27.819,11.278,27.709,11.032,27.53,10.854"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.14,29.482h1.604v-0.472h-0.472v-2.048l-0.429,0\n\tc-0.179,0.107-0.353,0.179-0.627,0.23v0.361h0.472v1.457H15.14V29.482z"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12.158,23.732H19.5c0.278,0,0.53,0.114,0.713,0.296\n\tc0.183,0.183,0.296,0.436,0.296,0.713v7.187c0,0.277-0.114,0.53-0.296,0.713c-0.183,0.183-0.436,0.296-0.713,0.296h-7.341\n\tc-0.278,0-0.53-0.114-0.713-0.296c-0.183-0.183-0.296-0.436-0.296-0.713v-7.187c0-0.277,0.114-0.53,0.296-0.713\n\tC11.628,23.846,11.881,23.732,12.158,23.732 M19.5,24.05h-7.341c-0.19,0-0.363,0.078-0.488,0.203\n\tc-0.125,0.125-0.203,0.298-0.203,0.487v7.187c0,0.19,0.078,0.363,0.203,0.488c0.125,0.125,0.298,0.203,0.488,0.203H19.5\n\tc0.19,0,0.362-0.078,0.488-0.203c0.125-0.125,0.203-0.298,0.203-0.488v-7.187c0-0.19-0.078-0.363-0.203-0.487\n\tC19.862,24.128,19.69,24.05,19.5,24.05"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.009,46.893h1.774v-0.492l-0.508,0c-0.119,0-0.293,0.016-0.421,0.032\n\tc0.409-0.429,0.806-0.881,0.806-1.306c0-0.484-0.338-0.802-0.833-0.802c-0.361,0-0.595,0.135-0.845,0.401L15.3,45.04\n\tc0.127-0.135,0.266-0.258,0.448-0.258c0.218,0,0.357,0.135,0.357,0.381c0,0.357-0.452,0.79-1.096,1.397L15.009,46.893L15.009,46.893\n\tz"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12.158,41.143H19.5c0.278,0,0.53,0.114,0.713,0.296\n\tc0.183,0.183,0.296,0.436,0.296,0.713v7.186c0,0.277-0.114,0.53-0.296,0.713c-0.183,0.183-0.436,0.297-0.713,0.297h-7.341\n\tc-0.278,0-0.53-0.114-0.713-0.297c-0.183-0.183-0.296-0.436-0.296-0.713v-7.186c0-0.277,0.114-0.53,0.296-0.713\n\tC11.628,41.257,11.881,41.143,12.158,41.143 M19.5,41.462h-7.341c-0.19,0-0.363,0.078-0.488,0.203\n\tc-0.125,0.125-0.203,0.298-0.203,0.488v7.186c0,0.19,0.078,0.363,0.203,0.488c0.125,0.125,0.298,0.203,0.488,0.203l7.341,0\n\tc0.19,0,0.362-0.078,0.488-0.203c0.125-0.125,0.203-0.298,0.203-0.488v-7.186c0-0.19-0.078-0.363-0.203-0.488\n\tC19.862,41.539,19.69,41.462,19.5,41.462"/>\n<path pulse:group="1" fill-rule="evenodd" clip-rule="evenodd" fill="#000000" d="M37.227,63.88c1.763,0,3.362,0.429,4.524,1.122\n\tc1.194,0.713,1.933,1.708,1.933,2.816c0,1.109-0.739,2.104-1.933,2.816c-1.162,0.693-2.762,1.122-4.524,1.122\n\tc-1.763,0-3.362-0.429-4.524-1.122c-1.194-0.713-1.933-1.708-1.933-2.816c0-1.109,0.739-2.104,1.933-2.816\n\tC33.865,64.309,35.465,63.88,37.227,63.88 M36.04,67.835c0,0.962,0.622,1.467,1.403,1.467c0.403,0,0.763-0.166,0.972-0.347v-1.317\n\th-1.061v0.526h0.479v0.492c-0.071,0.057-0.191,0.088-0.306,0.088c-0.546,0-0.817-0.343-0.817-0.931c0-0.575,0.319-0.922,0.763-0.922\n\tc0.248,0,0.386,0.083,0.533,0.215l0.359-0.4c-0.196-0.193-0.493-0.373-0.901-0.373C36.68,66.334,36.04,66.887,36.04,67.835"/>\n<path pulse:unit="00" pulse:state="0" pulse:group="0" fill-rule="evenodd" clip-rule="evenodd" fill="#000000" d="M33.5,29.11h7.341c0.278,0,0.53,0.114,0.713,0.296\n\tc0.183,0.182,0.296,0.436,0.296,0.713v7.187c0,0.278-0.114,0.53-0.296,0.713c-0.183,0.183-0.436,0.296-0.713,0.296H33.5\n\tc-0.278,0-0.53-0.114-0.713-0.296c-0.183-0.183-0.296-0.436-0.296-0.713v-7.187c0-0.278,0.114-0.53,0.296-0.713\n\tC32.969,29.224,33.222,29.11,33.5,29.11 M36.481,34.86h1.604v-0.473l-0.473,0v-2.048h-0.429c-0.179,0.107-0.353,0.179-0.627,0.23\n\tv0.361h0.473v1.457h-0.548V34.86z"/>\n<path pulse:unit="01" pulse:state="0" fill-rule="evenodd" clip-rule="evenodd" fill="#000000" d="M33.5,46.521h7.341c0.278,0,0.53,0.114,0.713,0.297\n\tc0.183,0.183,0.296,0.436,0.296,0.713v7.187c0,0.278-0.114,0.53-0.296,0.713c-0.183,0.183-0.436,0.297-0.713,0.297H33.5\n\tc-0.278,0-0.53-0.114-0.713-0.297c-0.183-0.183-0.296-0.436-0.296-0.713v-7.187c0-0.277,0.114-0.53,0.296-0.713\n\tC32.969,46.635,33.222,46.521,33.5,46.521 M36.35,52.271h1.774v-0.492h-0.508c-0.119,0-0.294,0.016-0.421,0.031\n\tc0.409-0.429,0.806-0.881,0.806-1.306c0-0.484-0.338-0.802-0.833-0.802c-0.361,0-0.596,0.135-0.845,0.401l0.318,0.313\n\tc0.127-0.135,0.266-0.258,0.448-0.258c0.218,0,0.357,0.135,0.357,0.381c0,0.357-0.452,0.79-1.096,1.397L36.35,52.271L36.35,52.271z"\n\t/>\n<path pulse:initial="true" pulse:unit="00" pulse:state="1" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M16.744,29.482H15.14V29.01h0.548v-1.457h-0.472v-0.361\n\tc0.274-0.052,0.448-0.123,0.627-0.23l0.429,0v2.048h0.472V29.482z M12.159,32.62H19.5c0.19,0,0.362-0.078,0.488-0.203\n\tc0.125-0.125,0.203-0.298,0.203-0.488v-7.187c0-0.19-0.078-0.363-0.203-0.487c-0.125-0.125-0.298-0.203-0.488-0.203h-7.341\n\tc-0.19,0-0.363,0.078-0.488,0.203c-0.125,0.125-0.203,0.298-0.203,0.487v7.187c0,0.19,0.078,0.363,0.203,0.488\n\tC11.796,32.542,11.968,32.62,12.159,32.62z"/>\n<path fill="none" d="M16.744,29.482H15.14V29.01h0.548v-1.457h-0.472v-0.361c0.274-0.052,0.448-0.123,0.627-0.23l0.429,0v2.048\n\th0.472V29.482z M12.159,32.62H19.5c0.19,0,0.362-0.078,0.488-0.203c0.125-0.125,0.203-0.298,0.203-0.488v-7.187\n\tc0-0.19-0.078-0.363-0.203-0.487c-0.125-0.125-0.298-0.203-0.488-0.203h-7.341c-0.19,0-0.363,0.078-0.488,0.203\n\tc-0.125,0.125-0.203,0.298-0.203,0.487v7.187c0,0.19,0.078,0.363,0.203,0.488C11.796,32.542,11.968,32.62,12.159,32.62z"/>\n<path pulse:unit="01" pulse:state="1" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M15.009,46.561c0.644-0.608,1.096-1.04,1.096-1.397\n\tc0-0.246-0.139-0.381-0.357-0.381c-0.182,0-0.322,0.123-0.448,0.258l-0.318-0.313c0.25-0.266,0.484-0.401,0.845-0.401\n\tc0.496,0,0.833,0.317,0.833,0.802c0,0.424-0.397,0.877-0.806,1.306c0.127-0.016,0.301-0.032,0.421-0.032l0.508,0v0.492H15.01\n\tL15.009,46.561z M19.5,41.462h-7.341c-0.19,0-0.363,0.078-0.488,0.203c-0.125,0.125-0.203,0.298-0.203,0.488v7.186\n\tc0,0.19,0.078,0.363,0.203,0.488c0.125,0.125,0.298,0.203,0.488,0.203l7.341,0c0.19,0,0.362-0.078,0.488-0.203\n\tc0.125-0.125,0.203-0.298,0.203-0.488v-7.186c0-0.19-0.078-0.363-0.203-0.488C19.862,41.539,19.69,41.462,19.5,41.462z"/>\n<path fill="none" d="M15.009,46.561c0.644-0.608,1.096-1.04,1.096-1.397c0-0.246-0.139-0.381-0.357-0.381\n\tc-0.182,0-0.322,0.123-0.448,0.258l-0.318-0.313c0.25-0.266,0.484-0.401,0.845-0.401c0.496,0,0.833,0.317,0.833,0.802\n\tc0,0.424-0.397,0.877-0.806,1.306c0.127-0.016,0.301-0.032,0.421-0.032l0.508,0v0.492H15.01L15.009,46.561z M19.5,41.462h-7.341\n\tc-0.19,0-0.363,0.078-0.488,0.203c-0.125,0.125-0.203,0.298-0.203,0.488v7.186c0,0.19,0.078,0.363,0.203,0.488\n\tc0.125,0.125,0.298,0.203,0.488,0.203l7.341,0c0.19,0,0.362-0.078,0.488-0.203c0.125-0.125,0.203-0.298,0.203-0.488v-7.186\n\tc0-0.19-0.078-0.363-0.203-0.488C19.862,41.539,19.69,41.462,19.5,41.462z"/>\n</svg>\n',
	svgWidth: '80vw',
	svgHeight: '70vh',
	initWithDeviceData: false,
	previous: true,
	next: false
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container"></div>
	<div id="body"><span class="content"></span></div>
	<div class="foundAnimation" id="foundBackground" style="display:none;"></div>
	<i class="fa fa-check-circle foundAnimation" id="found" style="display:none;" aria-hidden="true"></i>
</div>

<script>
	var idPrefix = '[data-id="' + options.id + '"] ';
	$(idPrefix + '#body > span').html(__(options.body));
	var $imageContainer = $(idPrefix + '#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);

	$imageContainer.html(options.svg);
	$imageContainer.highlight();

	var found = false;
	Homey.on('frame', function (data) {
		if(!found) {
			found = true;
			Homey.emit('set_device', data, function (err, device) {
				if (err) {
					Homey.alert(__(err.message || err));
					found = false;
					return;
				}
				const dataKey = JSON.stringify(device.data);
				window.selected_devices = [ dataKey ];
				window.found_devices = {};
				window.found_devices[dataKey] = device;
				var $foundElems = $(idPrefix + '.foundAnimation');
				$foundElems.show();
				setTimeout(function () {
					$foundElems.addClass('fadeOut');
					setTimeout(nextView, 400);
				}, 500);
			});
		}
	});
</script>

<style>
	#found {
		z-index: 2;
		position: absolute;
		top: 20vh;
		left: 38vw;
		font-size: 30vh;
		color: #080;
		opacity: 1;
	}

	#foundBackground {
		z-index: 1;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		position: absolute;
		background-color: #FFF;
		opacity: 0.8;
	}

	.fadeOut {
		-webkit-transition: all 0.5s ease-in-out;
		-moz-transition: all 0.5s ease-in-out;
		-ms-transition: all 0.5s ease-in-out;
		-o-transition: all 0.5s ease-in-out;
		transition: all 0.5s ease-in-out;
		opacity: 0 !important;
	}
</style>