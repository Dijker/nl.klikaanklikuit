<script>
var options = {
	template: '../lib/pair/program.html',
	id: 'generic_program',
	previous: 'generic_choice',
	title: 'deviceClasses.build_in.views.generic_program.title',
	body: 'deviceClasses.build_in.views.generic_program.body',
	svg: '<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 20.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 988.91 1224.36" style="enable-background:new 0 0 988.91 1224.36;" xml:space="preserve" xmlns:pulse="-">\n<style type="text/css">\n\t.st0{fill-rule:evenodd;clip-rule:evenodd;fill:#000000;}\n</style>\n<path d="M802.92,372.67c-15.61,0-28.31-12.7-28.31-28.31c0-15.61,12.7-28.31,28.31-28.31c15.61,0,28.31,12.7,28.31,28.31\n\tC831.23,359.97,818.53,372.67,802.92,372.67 M802.92,323.14c-11.7,0-21.22,9.52-21.22,21.22c0,11.7,9.52,21.22,21.22,21.22\n\tc11.7,0,21.22-9.52,21.22-21.22C824.14,332.66,814.62,323.14,802.92,323.14"/>\n<path d="M876.55,218.21c-10.16,0-18.43-8.27-18.43-18.43s8.27-18.43,18.43-18.43c10.16,0,18.43,8.27,18.43,18.43\n\tS886.72,218.21,876.55,218.21 M876.55,184.89c-8.21,0-14.89,6.68-14.89,14.89c0,8.21,6.68,14.89,14.89,14.89\n\tc8.21,0,14.89-6.68,14.89-14.89C891.44,191.57,884.76,184.89,876.55,184.89"/>\n<path d="M888.96,845.14H98.16c-13.16,0-23.87-10.71-23.87-23.86V418.23c0-13.16,10.71-23.86,23.87-23.86h790.8\n\tc13.16,0,23.86,10.71,23.86,23.86v403.04C912.82,834.43,902.12,845.14,888.96,845.14 M98.16,401.45c-9.25,0-16.78,7.53-16.78,16.78\n\tv403.04c0,9.25,7.53,16.78,16.78,16.78h790.8c9.25,0,16.78-7.53,16.78-16.78V418.23c0-9.25-7.53-16.78-16.78-16.78H98.16z"/>\n<rect x="63.92" y="928.4" transform="matrix(0.7497 -0.6618 0.6618 0.7497 -591.4495 300.127)" width="74.22" height="7.09"/>\n<polygon points="120.09,905.32 135.04,901.97 129.86,916.4 "/>\n<path d="M126.5,950.37c-9.95,0-18.34-6.21-26.12-11.97c-11.28-8.36-21.02-15.57-35.15-6.72l-3.76-6\n\tc18.22-11.42,31.45-1.62,43.13,7.03c13.04,9.66,23.35,17.3,40.36,1.28l4.86,5.16C141.08,947.37,133.41,950.37,126.5,950.37"/>\n<polygon points="266.92,954.07 234.09,954.07 234.09,900.96 241.17,900.96 241.17,946.99 266.92,946.99 "/>\n<path d="M300.05,864.26H49.13c-16.84,0-30.55,13.7-30.55,30.54v128.89c0,39.14,31.84,70.98,70.98,70.98h207.86\n\tc18.05,0,32.73-14.68,32.73-32.73v-15.04h0.44V894.81C330.6,877.96,316.89,864.26,300.05,864.26 M323.51,1039.83h-0.44v22.12\n\tc0,14.14-11.5,25.64-25.64,25.64H89.57c-35.23,0-63.9-28.66-63.9-63.9V894.81c0-12.94,10.52-23.46,23.46-23.46h250.92\n\tc12.93,0,23.46,10.52,23.46,23.46V1039.83z"/>\n<path d="M987.14,158.85c-0.11-49.38-40.29-89.55-89.57-89.55H583.79V0h-42.46v69.29h-99.06V0h-42.46v69.29H89.57\n\tC40.18,69.29,0,109.47,0,158.86v864.83c0,43.83,31.64,80.4,73.28,88.08v15.89c0,12.31,9.56,22.43,21.65,23.34v73.36h42.46v-73.28\n\th99.06v73.28h42.46v-73.55c11.22-1.72,19.85-11.44,19.85-23.14v-14.43c26.49-0.68,48.07-21.53,49.86-47.73h213.71v9\n\tc0,16.95,13.79,30.74,30.74,30.74h34.79v73.5h42.46v-73.5h99.06v73.5h42.46v-73.5h25.8c16.95,0,30.74-13.79,30.74-30.74v-9h30.96\n\tc23.89,0,46.41-9.38,63.39-26.4c16.93-16.97,26.23-39.41,26.17-63.19L987.14,158.85z M544.87,3.55h35.38v65.75h-35.38V3.55z\n\t M403.35,3.55h35.38v65.75h-35.38V3.55z M133.84,1220.82H98.47v-69.74h35.38V1220.82z M275.37,1220.82h-35.38v-69.74h35.35\n\tc0.01,0,0.01,0,0.02,0V1220.82z M275.34,1143.99H96.69c-9,0-16.33-7.32-16.33-16.33v-14.87c3.03,0.31,6.1,0.47,9.2,0.47h202.1v14.4\n\tC291.67,1136.67,284.35,1143.99,275.34,1143.99 M666.77,1175.21H631.4v-69.96h35.38V1175.21z M808.3,1175.21h-35.38v-69.96h35.38\n\tV1175.21z M861.3,1074.5c0,13.04-10.61,23.66-23.66,23.66H593.07c-13.04,0-23.66-10.61-23.66-23.66v-9H861.3V1074.5z M952.7,1029.09\n\tc-14.31,14.34-33.26,22.24-53.36,22.24H334.57v10.62c0,20.48-16.66,37.14-37.14,37.14H89.57c-41.57,0-75.4-33.82-75.4-75.4V158.86\n\tc0-41.57,33.82-75.4,75.4-75.4h808c41.48,0,75.31,33.83,75.4,75.41l1.77,817.07C974.78,995.93,966.95,1014.81,952.7,1029.09"/>\n<path d="M104.25,976.7c-22.59,0-40.97,18.38-40.97,40.97c0,22.59,18.38,40.98,40.97,40.98s40.97-18.38,40.97-40.98\n\tC145.22,995.08,126.84,976.7,104.25,976.7 M104.25,1055.1c-20.64,0-37.43-16.79-37.43-37.43c0-20.64,16.79-37.43,37.43-37.43\n\ts37.43,16.79,37.43,37.43C141.68,1038.31,124.89,1055.1,104.25,1055.1"/>\n<path d="M248.89,976.7c-22.59,0-40.97,18.38-40.97,40.97c0,22.59,18.38,40.98,40.97,40.98c22.59,0,40.97-18.38,40.97-40.98\n\tC289.87,995.08,271.49,976.7,248.89,976.7 M248.89,1055.1c-20.64,0-37.43-16.79-37.43-37.43c0-20.64,16.79-37.43,37.43-37.43\n\ts37.43,16.79,37.43,37.43C286.33,1038.31,269.53,1055.1,248.89,1055.1"/>\n<path pulse:initial="true" class="st0" d="M802.92,323.06c11.77,0,21.31,9.54,21.31,21.31c0,11.77-9.54,21.31-21.31,21.31\n\tc-11.77,0-21.31-9.54-21.31-21.31C781.61,332.6,791.15,323.06,802.92,323.06"/>\n</svg>\n',
	svgWidth: '80vw',
	svgHeight: '70vh',
	initWithDeviceData: false,
	next: true
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container"></div>
	<div id="body"><span class="content"></span></div>
	<div class="foundAnimation" id="foundBackground" style="display:none;"></div>
	<i class="fa fa-check-circle foundAnimation" id="found" style="display:none;" aria-hidden="true"></i>
</div>

<script>
	var $container = $('[data-id="' + options.id + '"] ');
	$container.find('#body > span').html(__(options.body));
	var $imageContainer = $container.find('#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);

	$imageContainer.html(options.svg);
	$imageContainer.highlight();

	if (!$container.find('.view-navigation-next.dummy').length) {
		var $nextButton = $container.find('.view-navigation-next');
		var $nextButtonDummy = $nextButton.clone().addClass('dummy');
		$nextButton.hide();
		$nextButton.parent().append($nextButtonDummy);

		$nextButtonDummy.on('click', function (e) {
			Homey.emit('program_send', function (err) {
				if (err){
					Homey.alert(__(err.message || err));
					return;
				}
				$nextButtonDummy.siblings('.view-navigation-next').click();
			});
			e.stopPropagation();
			return false;
		});
	}

	Homey.emit('program', function(err, device){
		const dataKey = JSON.stringify(device.data);
		window.selected_devices = [ dataKey ];
		window.found_devices = {};
		window.found_devices[dataKey] = device;
	});
</script>