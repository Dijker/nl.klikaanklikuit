<script>
var options = {
	template: '../lib/pair/program.html',
	id: 'generic_program',
	previous: 'generic_choice',
	title: 'deviceClasses.generic_socket.views.generic_program.title',
	body: 'deviceClasses.simple_socket.views.generic_program.body',
	svg: '<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 17.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t width="802.14px" height="1403.548px" viewBox="0 0 802.14 1403.548" enable-background="new 0 0 802.14 1403.548"\n\t xml:space="preserve" xmlns:pulse="-">\n<g>\n\t<path d="M406.332,751.119c-72.64,0-138.539,29.576-186.274,77.311c-47.735,47.735-77.051,113.373-77.051,186.273\n\t\tc0,72.64,29.316,138.538,77.051,186.273c47.735,47.735,113.633,77.051,186.274,77.051c72.64,0,138.538-29.316,186.273-77.051\n\t\tc14.009-14.009,26.202-29.316,36.839-46.18v0.26l3.372-5.707c0.26-0.517,0.52-1.037,1.039-1.556l0.519-1.297\n\t\tc0.26-0.517,0.52-1.037,0.78-1.297l0.779-1.556l1.039-1.297l0.519-1.297c0.259-0.519,0.779-1.297,1.039-1.816l0.519-1.039\n\t\tl0.779-1.556l0.259-0.26l0.26-0.779l0.265,0.004c0.261-0.777,0.52-1.297,0.78-1.816l0.519-1.039c0.26-0.777,0.52-1.297,0.779-1.816\n\t\tl0.78-1.297c0.26-0.517,0.52-1.037,0.78-1.556l0.519-1.297l0.779-1.816l0.519-0.78c0.26-0.779,0.52-1.556,0.78-2.075l0.519-0.78\n\t\tc0.26-0.779,0.52-1.296,0.779-2.075l0.519-1.297l0.78-1.556l0.519-1.297l0.779-1.816l0.259-0.78v-0.259\n\t\tc0.26-0.519,0.52-1.296,1.039-2.075l0.26-0.78c0.26-0.778,0.52-1.296,0.78-2.075l0.259-0.78v-0.259\n\t\tc0.26-0.779,0.52-1.296,0.78-2.075l0.259-0.26l0.26-0.78l0.519-1.816l0.259-0.779l0.26-0.259c0.259-0.779,0.259-1.556,0.519-2.075\n\t\tl0.26-0.26l0.259-0.78v-0.26l0.26-0.78l0.259-0.779l0.26-0.78l0.259-1.039c0.26-0.517,0.26-1.037,0.519-1.556l0.259-0.78v-0.259\n\t\tc0.26-0.779,0.52-1.555,0.779-2.335l0.26-1.039c0.259-0.519,0.519-1.296,0.519-2.075l0.259-0.779\n\t\tc0.26-0.778,0.519-1.555,0.519-2.335l0.259-0.78c3.891-14.268,6.485-28.796,7.782-43.844v-0.259\n\t\tc0.519-7.525,0.779-15.307,0.754-22.813c0-9.078-0.257-17.64-1.297-26.461v-0.519v-1.556l-0.26-0.26c0-0.779,0-1.555-0.259-2.335\n\t\tv-1.039v-0.26c-0.26-0.779-0.26-1.555-0.26-2.335l-0.259-0.78v-0.259c0-0.779-0.26-1.555-0.26-2.335v-0.259l-0.259-0.78\n\t\tl-0.26-1.816v-0.78v-0.26c-0.26-0.778-0.26-1.555-0.519-2.335v-0.779c-4.671-26.984-13.492-52.665-25.685-76.275l-0.26,0.004\n\t\tc-0.26-0.779-0.779-1.555-1.039-2.335l-0.519-0.779v-0.26c-0.259-0.519-0.78-1.036-1.039-1.816l-0.519-1.039l-0.779-1.297\n\t\tl-0.519-0.779l-0.259-0.26c-0.26-0.779-0.78-1.296-1.039-2.075l-0.519-0.78v-0.26c-0.52-0.517-0.779-1.037-1.039-1.556\n\t\tl-3.372-5.707v0.26c-10.637-16.864-22.83-32.171-36.839-46.18C544.87,780.694,478.972,751.119,406.332,751.119z M160.161,932.45\n\t\tc5.19-15.307,11.676-30.095,19.458-43.844v95.731h-31.131C150.563,966.437,154.454,949.054,160.161,932.45z M179.619,1140.775\n\t\tc-8.042-14.528-14.787-29.833-19.975-45.66c-5.71-17.381-9.601-35.282-11.417-53.962h31.391V1140.775z M633.368,1140.775v-99.622\n\t\tH664.5C660.869,1077.212,649.972,1110.679,633.368,1140.775z M664.243,984.337h-30.872l-0.001-95.731\n\t\tC649.455,917.403,660.352,949.831,664.243,984.337z M629.48,881.863v104.552v1.816h1.816h33.466\n\t\tc0.778,8.819,1.297,17.381,1.297,26.461c0,7.523-0.52,15.307-1.039,22.83h-33.726h-1.816v1.816v108.183\n\t\tc-11.157,18.419-24.386,35.542-39.434,50.59c-46.956,47.218-112.074,76.275-183.678,76.275s-136.462-29.059-183.678-76.275\n\t\tc-15.048-15.048-28.277-31.91-39.434-50.59v-108.186v-1.816h-1.816H147.71c-0.52-7.523-1.039-15.307-1.039-22.83\n\t\tc0-9.079,0.517-17.64,1.297-26.461h33.467v0.003h1.822v-1.816V881.604c11.157-18.419,24.386-35.282,39.434-50.59\n\t\tc47.215-46.958,112.074-76.015,183.678-76.015s136.72,29.057,183.678,76.015C605.094,846.322,618.323,863.444,629.48,881.863z"/>\n\t<path d="M724.187,0H77.953C34.969,0,0,34.97,0,77.953v1247.642c0,42.983,34.97,77.953,77.953,77.953h646.234\n\t\tc42.983,0,77.953-34.97,77.953-77.953V77.953C802.14,34.97,767.17,0,724.187,0z M704.345,688.404\n\t\tc27.777,21.206,43.708,53.245,43.708,87.901v465.52c0,34.678-15.947,66.729-43.736,87.923c-1.105,0.831-1.266,1.896-1.264,2.448\n\t\tv57.178H110.604l0-57.142c0.008-0.566-0.144-1.641-1.247-2.473c-27.806-21.205-43.753-53.257-43.753-87.935v-465.52\n\t\tc0-34.657,15.931-66.695,43.711-87.902c0.653-0.5,1.408-1.418,1.289-2.976V14.173h592.449l-0.002,671.272\n\t\tC702.935,686.984,703.689,687.903,704.345,688.404z M14.173,1325.594V77.953c0-35.168,28.612-63.78,63.78-63.78h26.982v670.448\n\t\tc-28.615,22.288-45,55.636-45,91.684v465.52c0,36.045,16.38,69.386,45,91.684v55.865H77.953\n\t\tC42.785,1389.374,14.173,1360.762,14.173,1325.594z M787.966,1325.594c0,35.168-28.611,63.779-63.779,63.779h-15.465v-55.864\n\t\tc28.615-22.289,45-55.635,45-91.685v-465.52c0-36.047-16.386-69.396-45-91.684V14.173h15.465c35.168,0,63.779,28.612,63.779,63.78\n\t\tV1325.594z"/>\n\t<path d="M406.362,722.334c-77.872,0-151.302,30.393-206.77,85.588c-55.193,55.191-85.588,128.624-85.588,206.77\n\t\tc0,77.978,30.394,151.318,85.592,206.516c55.464,55.189,128.894,85.582,206.766,85.582s151.308-30.393,206.773-85.586\n\t\tc55.192-55.191,85.587-128.533,85.587-206.511c0-78.147-30.396-151.577-85.592-206.776\n\t\tC557.667,752.727,484.234,722.334,406.362,722.334z M604.058,1212.375c-52.987,52.72-123.192,81.753-197.69,81.753\n\t\tc-74.498,0-144.705-29.033-197.682-81.742c-52.716-52.987-81.75-123.195-81.75-197.693c0-74.498,29.033-144.705,81.745-197.687\n\t\tc52.714-52.716,122.919-81.746,197.684-81.746c74.765,0,144.97,29.031,197.682,81.74c52.719,52.987,81.753,123.195,81.753,197.693\n\t\tC685.8,1089.191,656.767,1159.398,604.058,1212.375z"/>\n\t<circle cx="539.453" cy="1014.692" r="37.617"/>\n\t<circle cx="273.274" cy="1014.692" r="37.617"/>\n\t<path d="M376.62,334.509c0,14.693,11.954,26.646,26.646,26.646s26.647-11.954,26.647-26.646V137.688\n\t\tc5.815-6.534,9.005-14.899,9.005-23.685c0-19.659-15.993-35.652-35.652-35.652c-19.658,0-35.651,15.993-35.651,35.652\n\t\tc0,8.785,3.189,17.151,9.005,23.685V334.509z M403.266,84.021c16.533,0,29.982,13.45,29.982,29.983\n\t\tc0,7.711-2.921,15.038-8.227,20.629l-0.778,0.82v199.056c0,11.567-9.41,20.978-20.977,20.978s-20.978-9.411-20.978-20.978V135.453\n\t\tl-0.778-0.82c-5.305-5.592-8.227-12.918-8.227-20.629C373.284,97.471,386.734,84.021,403.266,84.021z"/>\n</g>\n<path pulse:initial="true" d="M386.34,130.929c4.302,4.304,10.329,6.885,16.926,6.885c6.597,0,12.621-2.582,16.927-6.885\n\tc4.303-4.302,6.885-10.329,6.885-16.927c0-6.597-2.583-12.624-6.885-16.927c-4.303-4.304-10.329-6.885-16.927-6.885\n\tc-6.597,0-12.624,2.583-16.926,6.885c-4.304,4.302-6.886,10.329-6.886,16.927C379.454,120.6,382.037,126.627,386.34,130.929z\n\t M389.496,100.234c3.441-3.731,8.318-5.738,13.77-5.738c5.452,0,10.326,2.01,13.77,5.738c3.728,3.441,6.023,8.318,6.023,13.77\n\tc0,5.452-2.295,10.328-6.023,14.057c-3.441,3.444-8.318,5.739-13.77,5.739c-5.451,0-10.326-2.295-13.77-5.739\n\tc-3.731-3.727-6.023-8.605-6.023-14.057C383.473,108.552,385.768,103.678,389.496,100.234z"/>\n<circle fill="#000000" cx="403.266" cy="114.003" r="17.498"/>\n</svg>\n',
	svgWidth: '80vw',
	svgHeight: '70vh',
	initWithDeviceData: false,
	next: true
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container"></div>
	<div id="body"><span class="content"></span></div>
	<div class="programAnimation" id="sendProgramSignalBackground" style="display:none;"></div>
	<i class="loading fa fa-cog fa-spin programAnimation" id="sendProgramSignalSpinner" style="display:none;"></i>
</div>

<script>
	var $container = $('[data-id="' + options.id + '"] ');
	$container.find('#body > span').html(__(options.body));
	var $imageContainer = $container.find('#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);
	var $programElems = $container.find('.programAnimation');

	$imageContainer.html(options.svg);
	$imageContainer.highlight();

	if (!$container.find('.view-navigation-next.dummy').length) {
		var $nextButton = $container.find('.view-navigation-next');
		var $nextButtonDummy = $nextButton.clone().addClass('dummy');
		$nextButton.hide();
		$nextButton.parent().append($nextButtonDummy);

		$nextButtonDummy.on('click', function (e) {
			$programElems.show();
			Homey.emit('program_send', function (err) {
				if (err){
					Homey.alert(__(err.message || err));
					return;
				}
				$nextButtonDummy.siblings('.view-navigation-next').click();
				$programElems.hide();
			});
			e.stopPropagation();
			return false;
		});
	}

	Homey.emit('program', function(err, device){
		const dataKey = JSON.stringify(device.data);
		window.selected_devices = [ dataKey ];
		window.found_devices = {};
		window.found_devices[dataKey] = device;
	});
</script>

<style>
	#sendProgramSignalSpinner {
		z-index: 2;
		position: absolute;
		top: 25vh;
		left: 38vw;
		font-size: 9vh;
		opacity: 1;
	}

	#sendProgramSignalBackground {
		z-index: 1;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		position: absolute;
		background-color: #FFF;
		opacity: 0.8;
	}
</style>