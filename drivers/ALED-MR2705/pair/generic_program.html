<script>
var options = {
	template: '../lib/pair/program.html',
	id: 'generic_program',
	previous: 'generic_choice',
	title: 'deviceClasses.generic_socket.views.generic_program.title',
	body: 'devices.ALED-2709.views.generic_program.body',
	svg: '<?xml version="1.0" encoding="utf-8"?>\n<!-- Generator: Adobe Illustrator 20.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 811.7 1199.3" style="enable-background:new 0 0 811.7 1199.3;" xml:space="preserve">\n<g>\n\t<path d="M805.8,29.4C692.9,10.4,550.8,0,405.8,0S118.8,10.4,5.9,29.4l-5.9,1v48.3l4.1,1.9C13.8,85.1,23.8,88,34,89\n\t\tc-0.8,112.2,4.9,210.8,16.9,293.1c12.3,84.3,31.7,154.1,57.6,207.4l0.2,0.4c21.8,37.8,51.2,72.2,87.5,102.2l0.3,0.2\n\t\tc15.2,11.3,22.1,28.9,21.3,54v0.2v0.2c2.4,124.4,4.4,214.5,5.7,268.2c0.1,6,0.9,9.2,5.2,14c5.4,5.9,19.7,21.1,34.7,34.6\n\t\tc23.8,21.3,33.5,23.8,38.8,23.8h22.5v96.8c0,8.4,6.9,15.3,15.3,15.3s15.3-6.9,15.3-15.3v-96.8h107.2v96.8c0,8.4,6.9,15.3,15.3,15.3\n\t\ts15.3-6.9,15.3-15.3v-96.8h16.3c5.3,0,15-2.5,38.8-23.8c15-13.5,29.3-28.7,34.7-34.6c4.3-4.7,5.1-8,5.2-14\n\t\tc1.3-53.7,3.3-143.8,5.7-268.2v-0.2v-0.2c-0.8-25.1,6.1-42.7,21.3-54l0.3-0.2c36.3-30,65.7-64.4,87.5-102.2l0.2-0.4\n\t\tc25.9-53.3,45.3-123,57.6-207.4c12.1-82.3,17.8-180.9,16.9-293.1c10.2-1.1,20.2-3.9,29.9-8.4l4.1-1.9V30.4L805.8,29.4z M797.5,69.5\n\t\tC686.1,51.3,547.4,41.4,405.8,41.4c-141.5,0-280.2,10-391.7,28.1V42.4c111.2-18.2,250-28.2,391.7-28.2s280.5,10,391.7,28.2V69.5z\n\t\t M586.9,54c-0.6,32.2-1,59.5-1.4,85.9c-0.9,64.8-1.6,116.1-5.3,196c-0.9,19.3-3.7,30.5-9.5,37.4c-5.9,7.1-15.7,10.2-31.8,10.2\n\t\tc-11.6,0-24.6-5.2-39.7-11.2c-23.5-9.3-52.6-21-93.4-21.2c-40.7,0.2-69.9,11.8-93.4,21.2c-15.1,6-28.1,11.2-39.7,11.2\n\t\tc-16.1,0-25.9-3.1-31.8-10.2c-5.8-6.9-8.7-18.1-9.5-37.4c-3.7-80-4.4-131.2-5.3-196c-0.4-26.4-0.7-53.7-1.4-85.9\n\t\tc58.5-3.6,119.5-5.5,181.1-5.5C467.4,48.5,528.5,50.4,586.9,54z M509.4,1073.1h-166h-41.1c-0.7,0-7.5-0.6-29.4-20.1\n\t\tc-11-9.9-21.7-20.8-28.5-28c29.3,5.1,81.5,7.5,161.4,7.6c80-0.1,132.1-2.5,161.4-7.6C537.8,1056.3,515.7,1073.1,509.4,1073.1z\n\t\t M606.6,681.1c-18.7,14-27.8,36.1-26.9,65.6c-2.4,124.3-4.4,214.3-5.7,268c-0.1,3.1-0.1,3.1-1.5,4.7c-0.1,0.1-0.2,0.3-0.4,0.4\n\t\tc-27.6,5.7-81,8.5-166.3,8.6c-85.3-0.1-138.7-2.9-166.3-8.6c-0.1-0.1-0.2-0.3-0.4-0.4c-1.4-1.6-1.4-1.6-1.5-4.7\n\t\tc-1.3-53.7-3.3-143.7-5.7-268c0.9-29.5-8.1-51.5-26.9-65.6c-24.8-20.5-46.2-43.1-64-67.5c87.9,12.1,176.3,18.1,264.8,18.1\n\t\tc88.4,0,176.9-6,264.8-18.1C652.8,638,631.4,660.6,606.6,681.1z M770.4,75.3l-7,0.2l0.1,7c1.1,114.2-4.6,214.3-16.7,297.6\n\t\tc-12.1,82.8-31,151.1-56.2,203c-5.1,8.8-10.6,17.4-16.5,25.8c-178,24.8-358.4,24.8-536.4,0c-5.9-8.4-11.4-17-16.5-25.8\n\t\tC96,531.2,77.1,462.9,65,380.1C52.7,296.8,47.1,196.7,48.2,82.5l0.1-7l-7-0.2c-3.8-0.1-7.6-0.5-11.4-1.2\n\t\tc57-8.7,120.7-15.4,187.8-19.7c0.6,32.1,1,59.3,1.4,85.6c0.9,64.9,1.6,116.2,5.3,196.3c1,21,4.3,33.4,11.2,41.6\n\t\tc7.4,8.8,18.9,12.7,37.2,12.7c12.9,0,26.5-5.4,42.3-11.7c22.9-9.1,51.4-20.5,90.7-20.7c39.4,0.2,67.9,11.5,90.8,20.7\n\t\tc15.8,6.3,29.4,11.7,42.3,11.7c18.4,0,29.8-3.9,37.2-12.7c6.9-8.2,10.2-20.7,11.2-41.6c3.7-80.1,4.4-131.4,5.3-196.3\n\t\tc0.4-26.3,0.7-53.5,1.4-85.6c67.2,4.3,130.8,11,187.8,19.7C778,74.8,774.2,75.2,770.4,75.3z"/>\n\t<polygon points="357.2,195 355.4,201.5 360.2,201.5 358.4,195 \t"/>\n\t<path d="M374.8,206.6L374.8,206.6v1.5c0,0,0,1.3,2,1.3c0,0,1.5,0.1,2.2-0.4v-3.7l-2.6,0.3C376.4,205.4,374.8,205.7,374.8,206.6z"/>\n\t<path d="M285.2,177.7l-1.8,0.1v47.6l1.8,0.1c42.2,3.3,82.8,5,120.7,5s78.5-1.7,120.7-5l1.8-0.1v-47.6l-1.8-0.1\n\t\tc-40-3.1-80.6-4.7-120.7-4.7C365.7,173,325.1,174.6,285.2,177.7z M310.3,211.7L310.3,211.7h-5.8l-5.9-8.3h-1.3v8.1\n\t\tc0,0.1-0.1,0.2-0.2,0.2h-4.5c-0.1,0-0.2-0.1-0.2-0.2v-19.6c0-0.1,0.1-0.2,0.2-0.2h4.5c0.1,0,0.2,0.1,0.2,0.2v7.8h1.3l5.6-8.1h5.6\n\t\tv0.8l-6.8,9.1l7.3,9.6L310.3,211.7L310.3,211.7z M320,211.4L320,211.4c-1.4,0.6-3.3,0.5-3.3,0.5c-4.2,0-4-3.8-4-3.8v-16\n\t\tc0-0.1,0.1-0.2,0.2-0.2l0,0l3.6-0.8h0.3c0.5,0,0.5,0.3,0.5,0.5v15.6c0,0,0.1,1.3,1,1.3h0.8c0.3,0,0.5,0,0.5,0.3l0.5,2.3\n\t\tC320.2,211.2,320.2,211.4,320,211.4z M323.1,191.3c0-0.1,0.1-0.2,0.2-0.2h4.2c0.1,0,0.2,0.1,0.2,0.2v4.5c0,0.1-0.1,0.2-0.2,0.2\n\t\th-4.2c-0.1,0-0.2-0.1-0.2-0.2V191.3z M327.8,211.4c0,0.1-0.1,0.2-0.2,0.2h-4.2c-0.1,0-0.2-0.1-0.2-0.2v-13.3c0-0.1,0.1-0.2,0.2-0.2\n\t\th4.2c0.1,0,0.2,0.1,0.2,0.2V211.4z M346.3,211.7L346.3,211.7h-5.2l-3.1-5.5h-1v5.2c0,0.1-0.1,0.2-0.2,0.2h-4.2c0,0-0.2-0.1-0.2-0.2\n\t\tv-3.7v-15.6c0-0.1,0.1-0.2,0.2-0.2l0,0l3.6-0.8h0.3c0.5,0,0.5,0.3,0.5,0.5v11v0.4h1l3.4-5.5c0,0,0.1-0.3,0.3-0.3l4.4,0.3\n\t\tc0.2,0,0.2,0.3,0.2,0.3l-4.4,6.5l4.7,7C346.5,211.7,346.3,211.7,346.3,211.7z M367.8,211.7h-4.7c0,0-0.2,0-0.2-0.3l-1.8-6.5h-6.6\n\t\tl-1.8,6.5c0,0.2-0.3,0.3-0.3,0.3h-4.7c0,0-0.5,0-0.3-0.5l6-19.3c0.3-0.3,0.3-0.3,0.5-0.3h7.5c0.3,0,0.3,0,0.5,0.3l6,19.3\n\t\tC368.3,211.7,367.8,211.7,367.8,211.7z M383.7,209.3c0,0.6-0.2,0.8-0.2,0.8c-2.1,2.1-6.2,2.1-6.2,2.1h-1.1c-6.3,0-6-4.1-6-4.1v-1.5\n\t\tc0-2.8,4-3.6,4-3.6l4.8-0.8v-0.7c0-1.2-1.4-1.3-1.4-1.3c-2.6-0.3-5.5,0.6-5.5,0.6c-0.7,0.1-0.6-0.4-0.6-0.4l-0.2-1.9\n\t\tc-0.1-0.4,0.3-0.5,0.3-0.5c2.8-1.2,7.1-1,7.1-1c5.2,0,5.1,4.2,5.1,4.2L383.7,209.3L383.7,209.3z M400.5,211.7h-4.2\n\t\tc-0.1,0-0.2-0.1-0.2-0.2v-10.3c0,0,0-1.3-2-1.3c0,0-1.5-0.1-2.2,0.4v10.5v0.7c0,0.1-0.1,0.2-0.2,0.2h-4.2c-0.1,0-0.2-0.1-0.2-0.2\n\t\tv-1.9v-9.7c0-0.6,0.2-0.8,0.2-0.8c2.1-2.1,6.2-2.1,6.2-2.1h1.1c6.3,0,6,4.1,6,4.1v8.7v1.6C400.8,211.6,400.7,211.7,400.5,211.7z\n\t\t M524.1,181.5v40.3c-36.6,2.9-74.8,4.6-113.6,4.8h-4.7v-49.7h4.7C445.3,176.9,482.5,178.4,524.1,181.5z"/>\n\t<path d="M449.8,211.7h4.2c0.1,0,0.2-0.1,0.2-0.2v-5.2h1l3.1,5.5h5.2c0,0,0.3,0,0.3-0.3l-4.7-7l4.4-6.5c0,0,0.1-0.2-0.2-0.3l0,0\n\t\tl-4.4-0.3c-0.3,0-0.3,0.3-0.3,0.3l-3.4,5.5h-1v-11.4c0-0.2,0-0.5-0.5-0.5h-0.3l-3.6,0.8l0,0c-0.1,0-0.2,0.1-0.2,0.2v15.6v3.7\n\t\tL449.8,211.7z"/>\n\t<path d="M410,211.7h4.5c0.1,0,0.2-0.1,0.2-0.2l0,0v-8.1h1.3l5.9,8.3h5.8v-0.5l-7.3-9.6l6.8-9.1v-0.8h-5.6l-5.6,8.1h-1.3V192\n\t\tc0-0.1-0.1-0.2-0.2-0.2H410c-0.1,0-0.2,0.1-0.2,0.2v19.6C409.8,211.6,409.9,211.7,410,211.7z"/>\n\t<path d="M440.7,196h4.2c0.1,0,0.2-0.1,0.2-0.2v-4.5c0-0.1-0.1-0.2-0.2-0.2h-4.2c-0.1,0-0.2,0.1-0.2,0.2v4.5\n\t\tC440.5,195.9,440.6,196,440.7,196z"/>\n\t<path d="M444.9,197.9h-4.2c-0.1,0-0.2,0.1-0.2,0.2v13.3c0,0.1,0.1,0.2,0.2,0.2h4.2c0.1,0,0.2-0.1,0.2-0.2v-13.3\n\t\tC445.2,198,445.1,197.9,444.9,197.9z"/>\n\t<path d="M434.1,211.9c0,0,1.9,0.1,3.3-0.5c0.2,0,0.2-0.3,0.2-0.3l-0.5-2.3c0-0.3-0.2-0.3-0.5-0.3h-0.8c-1,0-1-1.3-1-1.3v-15.6\n\t\tc0-0.3,0-0.5-0.5-0.5H434l-3.7,0.8l0,0c-0.1,0-0.2,0.1-0.2,0.2v16C430.1,208.1,429.9,211.9,434.1,211.9z"/>\n\t<path d="M512.6,190.1h0.8l1.8,2.3h1.5l-2.2-2.5c0.4-0.2,0.7-0.4,0.9-0.7s0.4-0.6,0.4-1.1c0-0.3-0.1-0.6-0.2-0.8\n\t\tc-0.1-0.2-0.3-0.4-0.6-0.5c-0.2-0.1-0.5-0.2-0.7-0.3c-0.2,0-0.6,0-1,0h-1.8v5.9h1.1V190.1z M512.6,187.3h0.7c0.2,0,0.4,0,0.5,0\n\t\ts0.2,0.1,0.4,0.1c0.1,0.1,0.2,0.2,0.3,0.3s0.1,0.2,0.1,0.4l0,0c0,0.2,0,0.4-0.1,0.5c0,0.1-0.1,0.2-0.2,0.3\n\t\tc-0.1,0.1-0.2,0.2-0.4,0.2s-0.4,0.1-0.6,0.1h-0.6v-1.9H512.6z"/>\n\t<path d="M513.5,195c1.5,0,2.8-0.5,3.9-1.6c1.1-1.1,1.6-2.4,1.6-3.9s-0.5-2.8-1.6-3.9c-1.1-1.1-2.4-1.6-3.9-1.6s-2.8,0.5-3.9,1.6\n\t\ts-1.6,2.4-1.6,3.9s0.5,2.8,1.6,3.9C510.7,194.5,512,195,513.5,195z M510.1,186.1c0.9-0.9,2.1-1.4,3.4-1.4s2.4,0.5,3.4,1.4\n\t\tc0.9,0.9,1.4,2.1,1.4,3.4c0,1.3-0.5,2.5-1.4,3.4s-2.1,1.4-3.4,1.4c-1.3,0-2.4-0.5-3.4-1.4c-0.9-0.9-1.4-2.1-1.4-3.4\n\t\tC508.7,188.2,509.2,187.1,510.1,186.1z"/>\n\t<path d="M489.6,196h4.2c0.1,0,0.2-0.1,0.2-0.2v-4.5c0-0.1-0.1-0.2-0.2-0.2h-4.2c-0.1,0-0.2,0.1-0.2,0.2v4.5\n\t\tC489.4,195.9,489.5,196,489.6,196z"/>\n\t<path d="M493.9,197.9h-4.2c-0.1,0-0.2,0.1-0.2,0.2v13.3c0,0.1,0.1,0.2,0.2,0.2h4.2c0.1,0,0.2-0.1,0.2-0.2v-13.3\n\t\tC494.1,198,494,197.9,493.9,197.9z"/>\n\t<path d="M502.5,211.9c0,0,3.2,0.1,4.7-0.5c0.2,0,0.2-0.2,0.2-0.2l-0.3-2.3c0-0.3-0.2-0.3-0.5-0.3h-2.4c-1,0-1-1.3-1-1.3v-6.5h3.4\n\t\tc0.3,0,0.5,0,0.5-0.3v-2.6c0-0.3-0.3-0.5-0.5-0.5h-3.4v-5.7c0-0.3,0-0.5-0.5-0.5h-0.3l-3.6,0.8l0,0c-0.1,0-0.2,0.1-0.2,0.2v16\n\t\tC498.5,208.1,498.3,211.9,502.5,211.9z"/>\n\t<path d="M475.4,212.2c9.2,0,9.1-6.5,9.1-6.5v-14.1l0,0c0-0.3,0-0.5-0.5-0.5h-0.3l-4.2,0.8l0,0c-0.1,0-0.2,0.1-0.2,0.2v14.4\n\t\tc0,0,0.2,2-3.1,2h-1.4c0,0-3,0.1-3-2.9v-14c0-0.3,0-0.5-0.5-0.5H471l-4.1,0.8l0,0c-0.1,0-0.2,0.1-0.2,0.2v13\n\t\tC466.5,205.1,466.1,212.2,475.4,212.2z"/>\n</g>\n</svg>\n',
	svgWidth: '80vw',
	svgHeight: '70vh',
	initWithDeviceData: false,
	next: true
};
Homey.setTitle(__(options.title || ''));
Homey.emit('init', options.id);
Homey.on('show_view', function(viewId){
	Homey.showView(viewId);
});
Homey.on('close', function(){
	Homey.close();
});
Homey.on('nextView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) + 1;
	if(viewIndex > 0 && viewIndex < viewsIds.length){
		Homey.showView(viewsIds[viewIndex]);
	}
});
Homey.on('previousView', function(viewsIds){
	var viewIndex = viewsIds.indexOf(options.id) - 1;
	if(viewIndex >= 0){
		Homey.showView(viewsIds[viewIndex]);
	}
});
function nextView(){
	if(options.next){
		Homey.nextView();
	}else{
		Homey.emit('next');
	}
}
</script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<link href="../../../assets/433_generator/css/styles.css" rel="stylesheet" type="text/css"/>

<link href="../../../assets/433_generator/css/svg.css" rel="stylesheet" type="text/css"/>

<script src="../../../assets/433_generator/js/svghighlighter.js" type="text/javascript"></script>

<div class="centered-container">
	<div id="image-container"></div>
	<div id="body"><span class="content"></span></div>
	<div class="programAnimation" id="sendProgramSignalBackground" style="display:none;"></div>
	<i class="loading fa fa-cog fa-spin programAnimation" id="sendProgramSignalSpinner" style="display:none;"></i>
</div>

<script>
	var $container = $('[data-id="' + options.id + '"] ');
	$container.find('#body > span').html(__(options.body));
	var $imageContainer = $container.find('#image-container');
	$imageContainer.css('width', options.svgWidth).css('height', options.svgHeight);
	var $programElems = $container.find('.programAnimation');

	$imageContainer.html(options.svg);
	$imageContainer.highlight();

	if (!$container.find('.view-navigation-next.dummy').length) {
		var $nextButton = $container.find('.view-navigation-next');
		var $nextButtonDummy = $nextButton.clone().addClass('dummy');
		$nextButton.hide();
		$nextButton.parent().append($nextButtonDummy);

		$nextButtonDummy.on('click', function (e) {
			$programElems.show();
			Homey.emit('program_send', function (err) {
				if (err){
					Homey.alert(err.message && err.message.indexOf(' ') === -1 && __(err.message) !== err.message ? __(err.message) : JSON.stringify(err));
					return;
				}
				$nextButtonDummy.siblings('.view-navigation-next').click();
				$programElems.hide();
			});
			e.stopPropagation();
			return false;
		});
	}

	Homey.emit('program', function(err, device){
		const dataKey = JSON.stringify(device.data);
		window.selected_devices = [ dataKey ];
		window.found_devices = {};
		window.found_devices[dataKey] = device;
	});
</script>

<style>
	#sendProgramSignalSpinner {
		z-index: 2;
		position: absolute;
		top: 25vh;
		left: 38vw;
		font-size: 9vh;
		opacity: 1;
	}

	#sendProgramSignalBackground {
		z-index: 1;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		position: absolute;
		background-color: #FFF;
		opacity: 0.8;
	}
</style>